package com.project.crawl.service;

import com.fasterxml.jackson.databind.ObjectMapper;
import com.project.crawl.dao.TMAPIDao;
import com.project.crawl.service.dto.*;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;

import java.io.IOException;
import java.util.List;
import java.util.stream.Collectors;

@Service
@Slf4j
@RequiredArgsConstructor
public class TMAPIService {
    @Value("${tmapi.token:}")
    private String tmapiToken;

    private final TMAPIDao tmapiDao;

    public KeywordResponse getKeywordRelatedItemsResponse(
            String keyword, Integer page
    ) throws IOException, InterruptedException {
        /*
        HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create("http://api.tmapi.top/1688/search/items?apiToken=" + tmapiToken + "&page=" + page + "&page_size=20&keyword=" + keyword + "&sort=sales"))
                .method("GET", HttpRequest.BodyPublishers.noBody())
                .build();
        HttpResponse<String> response = HttpClient.newHttpClient().send(request, HttpResponse.BodyHandlers.ofString());
        String responseBody = response.body();
        tmapiDao.insertIntoSearchKeywordHistory(keyword, page, responseBody);
         */
        String responseBody = "{\"code\":200,\"msg\":\"success\",\"data\":{\"page\":1,\"page_size\":20,\"total_count\":56600,\"keyword\":\"vr\",\"sort\":\"sales\",\"price_start\":\"\",\"price_end\":\"\",\"items\":[{\"item_id\":737074668169,\"product_url\":\"https://detail.1688.com/offer/737074668169.html\",\"title\":\"亚马逊Meta quest3头戴 ABS精英 oculus quest 3充电头带 VR配件\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01as1sBs2A2SpZqZmNF_!!2211454468145-0-cib.jpg\",\"category_path\":[\"123760004\",\"123754001\",\"7\"],\"price\":\"58.00\",\"price_info\":{\"drop_ship_price\":\"58.00\",\"wholesale_price\":\"58.00\",\"origin_price\":\"58.00\"},\"quantity_begin\":100,\"quantity_prices\":[{\"begin_num\":\"100\",\"end_num\":\"\",\"price\":\"58.00\"}],\"sale_info\":{\"gmv_30days\":\"70万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":39006,\"orders_count\":142},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"广东\",\"惠州市惠阳区\"],\"weight\":0.5,\"suttle_weight\":0.48,\"free_postage\":false},\"item_repurchase_rate\":\"0.5185\",\"goods_score\":3.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":55,\"shop_info\":{\"login_id\":\"深圳唯美特科技\",\"member_id\":\"b2b-2211454468145f2b43\",\"biz_type\":\"生产加工\",\"company_name\":\"深圳市唯美特科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":3,\"factory_inspection\":false,\"shop_repurchase_rate\":\"47.7%\",\"sore_info\":{\"composite_new_score\":\"4.0\",\"composite_score\":0.0,\"consultation_score\":4.0,\"dispute_score\":5.0,\"logistics_score\":2.0,\"return_score\":3.0}}},{\"item_id\":748503189829,\"product_url\":\"https://detail.1688.com/offer/748503189829.html\",\"title\":\"新款VR SHINECON眼镜体感头盔跨境BOX体感3d虚拟游戏手机全批发\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01q1taHX1vqe0hkrm0X_!!2875136224-0-cib.jpg\",\"category_path\":[\"726\",\"1032228\",\"7\"],\"price\":\"60.50\",\"price_info\":{\"drop_ship_price\":\"60.50\",\"wholesale_price\":\"60.50\",\"origin_price\":\"60.50\"},\"quantity_begin\":20,\"quantity_prices\":[{\"begin_num\":\"20\",\"end_num\":\"1999\",\"price\":\"60.50\"},{\"begin_num\":\"2000\",\"end_num\":\"4999\",\"price\":\"55.00\"},{\"begin_num\":\"5000\",\"end_num\":\"\",\"price\":\"51.00\"}],\"sale_info\":{\"gmv_30days\":\"36万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":7489,\"orders_count\":17},\"type\":\"normal\",\"unit\":\"台\",\"delivery_info\":{\"area_from\":[\"广东\",\"东莞市\"],\"weight\":0.55,\"suttle_weight\":0.55,\"free_postage\":false},\"item_repurchase_rate\":\"0.6667\",\"goods_score\":2.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":15,\"shop_info\":{\"login_id\":\"千幻魔镜工厂\",\"member_id\":\"b2b-28751362246bdf4\",\"biz_type\":\"生产加工\",\"company_name\":\"东莞市千幻魔镜实业有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":8,\"factory_inspection\":true,\"shop_repurchase_rate\":\"38.7%\",\"sore_info\":{\"composite_new_score\":\"4.0\",\"composite_score\":0.0,\"consultation_score\":4.0,\"dispute_score\":5.0,\"logistics_score\":3.0,\"return_score\":3.0}}},{\"item_id\":680276306418,\"product_url\":\"https://detail.1688.com/offer/680276306418.html\",\"title\":\"VRSHINECON千幻魔镜虚拟现实vr眼镜 手机电影游戏3d数码眼镜vr\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01k2dJ201GCtGJXnnnG_!!933360587-0-cib.jpg\",\"category_path\":[\"726\",\"1032228\",\"7\"],\"price\":\"25.00\",\"price_info\":{\"drop_ship_price\":\"31.00\",\"wholesale_price\":\"25.00\",\"origin_price\":\"25.00\"},\"quantity_begin\":2,\"quantity_prices\":[{\"begin_num\":\"2\",\"end_num\":\"39\",\"price\":\"25.00\"},{\"begin_num\":\"40\",\"end_num\":\"599\",\"price\":\"23.00\"},{\"begin_num\":\"600\",\"end_num\":\"\",\"price\":\"20.00\"}],\"sale_info\":{\"gmv_30days\":\"25万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":59270,\"orders_count\":1000},\"type\":\"normal\",\"unit\":\"台\",\"delivery_info\":{\"area_from\":[\"广东\",\"广州市\"],\"weight\":0.8,\"suttle_weight\":0.8,\"free_postage\":false},\"item_repurchase_rate\":\"0.36\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":52,\"shop_info\":{\"login_id\":\"广州鹏超贸易有限公司\",\"member_id\":\"huayi09\",\"biz_type\":\"生产加工\",\"company_name\":\"广州鹏超贸易有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":9,\"factory_inspection\":false,\"shop_repurchase_rate\":\"40%\",\"sore_info\":{\"composite_new_score\":\"5.0\",\"composite_score\":0.0,\"consultation_score\":4.0,\"dispute_score\":5.0,\"logistics_score\":4.0,\"return_score\":3.0}}},{\"item_id\":759634940495,\"product_url\":\"https://detail.1688.com/offer/759634940495.html\",\"title\":\"Oculus quest3头戴VR配件 10000mAh快充18W电池头戴 Meta移动电源\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01ohDFgf1Od0v4lW5W2_!!2215670501727-0-cib.jpg\",\"category_path\":[\"123760004\",\"123754001\",\"7\"],\"price\":\"145.0\",\"price_info\":{\"drop_ship_price\":\"73.00\",\"wholesale_price\":\"145.0\",\"origin_price\":\"145.0\"},\"quantity_begin\":2,\"quantity_prices\":[],\"sale_info\":{\"gmv_30days\":\"20万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":3847,\"orders_count\":17},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市\"],\"weight\":0.5,\"suttle_weight\":0.5,\"free_postage\":false},\"item_repurchase_rate\":\"0.3636\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":21,\"shop_info\":{\"login_id\":\"piatnum0625\",\"member_id\":\"b2b-221567050172741ea9\",\"biz_type\":\"\",\"company_name\":\"深圳市龙岗区铂赛电子厂\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":1,\"factory_inspection\":false,\"shop_repurchase_rate\":\"47.8%\",\"sore_info\":{\"composite_new_score\":\"4.0\",\"composite_score\":0.0,\"consultation_score\":3.0,\"dispute_score\":5.0,\"logistics_score\":2.0,\"return_score\":4.5}}},{\"item_id\":736868847373,\"product_url\":\"https://detail.1688.com/offer/736868847373.html\",\"title\":\"新款 Meta quest3头戴RGB电竟款VR头戴8000毫安quest3头戴VR配件\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01JsYXUU1cIm0hnus0x_!!2212856843578-0-cib.jpg\",\"category_path\":[\"123760004\",\"123754001\",\"7\"],\"price\":\"148.0\",\"price_info\":{\"drop_ship_price\":\"148.0\",\"wholesale_price\":\"148.0\",\"origin_price\":\"148.0\"},\"quantity_begin\":2,\"quantity_prices\":[{\"begin_num\":\"2\",\"end_num\":\"999\",\"price\":\"148.00\"},{\"begin_num\":\"1000\",\"end_num\":\"1999\",\"price\":\"146.00\"},{\"begin_num\":\"2000\",\"end_num\":\"\",\"price\":\"142.00\"}],\"sale_info\":{\"gmv_30days\":\"19万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":11561,\"orders_count\":96},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市\"],\"weight\":480.0,\"suttle_weight\":0.0,\"free_postage\":false},\"item_repurchase_rate\":\"0.625\",\"goods_score\":3.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":15,\"shop_info\":{\"login_id\":\"君裕电子科技\",\"member_id\":\"b2b-221285684357871464\",\"biz_type\":\"生产加工\",\"company_name\":\"深圳市君裕电子科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":3,\"factory_inspection\":false,\"shop_repurchase_rate\":\"53.8%\",\"sore_info\":{\"composite_new_score\":\"3.5\",\"composite_score\":0.0,\"consultation_score\":2.0,\"dispute_score\":5.0,\"logistics_score\":3.0,\"return_score\":2.5}}},{\"item_id\":635790631549,\"product_url\":\"https://detail.1688.com/offer/635790631549.html\",\"title\":\"外贸热销VRG PRO蓝光护眼 vr眼镜手机虚拟现实头盔3D VR眼镜\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01Nxwx6e1HimKgzBDzl_!!1987110792-0-cib.jpg\",\"category_path\":[\"123754006\",\"123754001\",\"7\"],\"price\":\"23.00\",\"price_info\":{\"drop_ship_price\":\"21.00\",\"wholesale_price\":\"23.00\",\"origin_price\":\"23.00\"},\"quantity_begin\":5,\"quantity_prices\":[{\"begin_num\":\"5\",\"end_num\":\"\",\"price\":\"23.00\"}],\"sale_info\":{\"gmv_30days\":\"12万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":49420,\"orders_count\":3191},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市福田区\"],\"weight\":0.6,\"suttle_weight\":0.65,\"free_postage\":false},\"item_repurchase_rate\":\"0.5135\",\"goods_score\":4.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":25,\"shop_info\":{\"login_id\":\"星泰尔\",\"member_id\":\"b2b-1987110792\",\"biz_type\":\"生产加工\",\"company_name\":\"深圳市星泰尔科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":10,\"factory_inspection\":false,\"shop_repurchase_rate\":\"45.6%\",\"sore_info\":{\"composite_new_score\":\"4.5\",\"composite_score\":0.0,\"consultation_score\":3.5,\"dispute_score\":4.0,\"logistics_score\":4.0,\"return_score\":3.0}}},{\"item_id\":586250823764,\"product_url\":\"https://detail.1688.com/offer/586250823764.html\",\"title\":\"VRG眼镜手机用3D虚拟现实头盔魔镜蓝光智能礼品一件代发元宇宙VR\",\"img\":\"https://cbu01.alicdn.com/img/ibank/2019/163/581/10337185361_204179017.jpg\",\"category_path\":[\"123758003\",\"123754001\",\"7\"],\"price\":\"19.90\",\"price_info\":{\"drop_ship_price\":\"0.20\",\"wholesale_price\":\"19.90\",\"origin_price\":\"19.90\"},\"quantity_begin\":2,\"quantity_prices\":[{\"begin_num\":\"2\",\"end_num\":\"\",\"price\":\"0.20\"}],\"sale_info\":{\"gmv_30days\":\"12万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":660035,\"orders_count\":38188},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市龙岗区\"],\"weight\":0.38,\"suttle_weight\":0.38,\"free_postage\":false},\"item_repurchase_rate\":\"0.5182\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":27,\"shop_info\":{\"login_id\":\"深圳尚祺智业\",\"member_id\":\"b2b-27545417943f2a8\",\"biz_type\":\"\",\"company_name\":\"深圳尚祺智业商贸有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":9,\"factory_inspection\":false,\"shop_repurchase_rate\":\"55.8%\",\"sore_info\":{\"composite_new_score\":\"5.0\",\"composite_score\":0.0,\"consultation_score\":3.0,\"dispute_score\":5.0,\"logistics_score\":5.0,\"return_score\":3.0}}},{\"item_id\":590347751795,\"product_url\":\"https://detail.1688.com/offer/590347751795.html\",\"title\":\"新款VR眼镜虚拟现实BOX头盔智能手机体感游戏3D电影眼镜外贸爆款\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01bCVejK1J6srJC0Plh_!!2744440980-0-cib.jpg\",\"category_path\":[\"726\",\"1032228\",\"7\"],\"price\":\"33.00\",\"price_info\":{\"drop_ship_price\":\"28.00\",\"wholesale_price\":\"33.00\",\"origin_price\":\"33.00\"},\"quantity_begin\":2,\"quantity_prices\":[{\"begin_num\":\"2\",\"end_num\":\"\",\"price\":\"23.00\"}],\"sale_info\":{\"gmv_30days\":\"10万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":49260,\"orders_count\":925},\"type\":\"normal\",\"unit\":\"台\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市龙岗区\"],\"weight\":0.38,\"suttle_weight\":0.38,\"free_postage\":false},\"item_repurchase_rate\":\"0.3\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":15,\"shop_info\":{\"login_id\":\"深圳市小创科技\",\"member_id\":\"b2b-2744440980f2df8\",\"biz_type\":\"生产加工\",\"company_name\":\"深圳市小创科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":9,\"factory_inspection\":false,\"shop_repurchase_rate\":\"24.5%\",\"sore_info\":{\"composite_new_score\":\"5.0\",\"composite_score\":0.0,\"consultation_score\":4.0,\"dispute_score\":5.0,\"logistics_score\":4.0,\"return_score\":4.0}}},{\"item_id\":623588440833,\"product_url\":\"https://detail.1688.com/offer/623588440833.html\",\"title\":\"头戴式3D私人电影院魔镜虚拟现实游戏头盔手机VR眼镜厂家批发现货\",\"img\":\"https://cbu01.alicdn.com/img/ibank/18760659201_920299852.jpg\",\"category_path\":[\"726\",\"1032228\",\"7\"],\"price\":\"24.00\",\"price_info\":{\"drop_ship_price\":\"25.00\",\"wholesale_price\":\"24.00\",\"origin_price\":\"24.00\"},\"quantity_begin\":10,\"quantity_prices\":[{\"begin_num\":\"10\",\"end_num\":\"\",\"price\":\"19.00\"}],\"sale_info\":{\"gmv_30days\":\"7万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":17209,\"orders_count\":381},\"type\":\"normal\",\"unit\":\"台\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市龙岗区\"],\"weight\":0.75,\"suttle_weight\":0.5,\"free_postage\":false},\"item_repurchase_rate\":\"0.6667\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":2,\"shop_info\":{\"login_id\":\"牛背山科技\",\"member_id\":\"b2b-2200736556402bc2bd\",\"biz_type\":\"生产加工\",\"company_name\":\"深圳市牛背山科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":5,\"factory_inspection\":false,\"shop_repurchase_rate\":\"18.3%\",\"sore_info\":{\"composite_new_score\":\"5.0\",\"composite_score\":0.0,\"consultation_score\":4.0,\"dispute_score\":4.0,\"logistics_score\":4.0,\"return_score\":3.0}}},{\"item_id\":744705372085,\"product_url\":\"https://detail.1688.com/offer/744705372085.html\",\"title\":\"适用于Meta quest3精英头戴电源款头带Quest3 VR电池版款头戴配件\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01yXXquK2K4QhnnPQxP_!!2207878739503-0-cib.jpg\",\"category_path\":[\"123760004\",\"123754001\",\"7\"],\"price\":\"74.00\",\"price_info\":{\"drop_ship_price\":\"50.00\",\"wholesale_price\":\"74.00\",\"origin_price\":\"74.00\"},\"quantity_begin\":2,\"quantity_prices\":[],\"sale_info\":{\"gmv_30days\":\"6万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":2728,\"orders_count\":597},\"type\":\"normal\",\"unit\":\"件\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市\"],\"weight\":0.0,\"suttle_weight\":0.0,\"free_postage\":false},\"item_repurchase_rate\":\"0.4419\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":35,\"shop_info\":{\"login_id\":\"佐亿达科技\",\"member_id\":\"b2b-220787873950313c3e\",\"biz_type\":\"\",\"company_name\":\"深圳市佐亿达科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":4,\"factory_inspection\":false,\"shop_repurchase_rate\":\"42.3%\",\"sore_info\":{\"composite_new_score\":\"4.0\",\"composite_score\":0.0,\"consultation_score\":3.5,\"dispute_score\":5.0,\"logistics_score\":4.0,\"return_score\":4.0}}},{\"item_id\":728232739321,\"product_url\":\"https://detail.1688.com/offer/728232739321.html\",\"title\":\"现货适用于Meta quest3头戴可调节替换quest 3头带智能VR眼镜配件\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01tQUGu01CFrTFDn2R7_!!2213003580052-0-cib.jpg\",\"category_path\":[\"123760004\",\"123754001\",\"7\"],\"price\":\"60.00\",\"price_info\":{\"drop_ship_price\":\"60.00\",\"wholesale_price\":\"60.00\",\"origin_price\":\"60.00\"},\"quantity_begin\":2,\"quantity_prices\":[{\"begin_num\":\"2\",\"end_num\":\"999\",\"price\":\"60.00\"},{\"begin_num\":\"1000\",\"end_num\":\"4999\",\"price\":\"59.00\"},{\"begin_num\":\"5000\",\"end_num\":\"\",\"price\":\"58.00\"}],\"sale_info\":{\"gmv_30days\":\"6万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":15641,\"orders_count\":364},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市\"],\"weight\":0.227,\"suttle_weight\":0.227,\"free_postage\":false},\"item_repurchase_rate\":\"0.4535\",\"goods_score\":3.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":69,\"shop_info\":{\"login_id\":\"深圳市全宇宙科技有限公司\",\"member_id\":\"b2b-2213003580052150b8\",\"biz_type\":\"生产加工\",\"company_name\":\"深圳市全宇宙科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":3,\"factory_inspection\":false,\"shop_repurchase_rate\":\"50.7%\",\"sore_info\":{\"composite_new_score\":\"5.0\",\"composite_score\":0.0,\"consultation_score\":5.0,\"dispute_score\":5.0,\"logistics_score\":4.0,\"return_score\":3.5}}},{\"item_id\":742954306735,\"product_url\":\"https://detail.1688.com/offer/742954306735.html\",\"title\":\"Meta Quest3代 128G 512G VR眼镜头盔4K一体机串流SteamVR游戏\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01ovUYNn1NFMpdKME5E_!!2216678771540-0-cib.jpg\",\"category_path\":[\"123758003\",\"123754001\",\"7\"],\"price\":\"4000\",\"price_info\":{\"drop_ship_price\":\"4000\",\"wholesale_price\":\"4000\",\"origin_price\":\"4000\"},\"quantity_begin\":2,\"quantity_prices\":[{\"begin_num\":\"2\",\"end_num\":\"\",\"price\":\"4000.00\"}],\"sale_info\":{\"gmv_30days\":\"6万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":18,\"orders_count\":4},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市南山区\"],\"weight\":3.0,\"suttle_weight\":1.5,\"free_postage\":false},\"item_repurchase_rate\":\"0.0\",\"goods_score\":0.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":13,\"shop_info\":{\"login_id\":\"深圳创宇智能数码\",\"member_id\":\"b2b-2216678771540ee66b\",\"biz_type\":\"生产加工\",\"company_name\":\"深圳创宇科信数字技术有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":1,\"factory_inspection\":false,\"shop_repurchase_rate\":\"34.4%\",\"sore_info\":{\"composite_new_score\":\"4.0\",\"composite_score\":0.0,\"consultation_score\":4.0,\"dispute_score\":5.0,\"logistics_score\":4.0,\"return_score\":5.0}}},{\"item_id\":750401695155,\"product_url\":\"https://detail.1688.com/offer/750401695155.html\",\"title\":\"跨境新品Meta quest 3磁吸镜框防蓝光近视眼镜vr一体机quest3配件\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01Z2SO4u1DIRLEn12gB_!!2210406340193-0-cib.jpg\",\"category_path\":[\"123760004\",\"123754001\",\"7\"],\"price\":\"23.00\",\"price_info\":{\"drop_ship_price\":\"27.00\",\"wholesale_price\":\"23.00\",\"origin_price\":\"23.00\"},\"quantity_begin\":1,\"quantity_prices\":[{\"begin_num\":\"1\",\"end_num\":\"\",\"price\":\"23.00\"}],\"sale_info\":{\"gmv_30days\":\"5万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":5105,\"orders_count\":186},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市福田区\"],\"weight\":0.0,\"suttle_weight\":0.078,\"free_postage\":false},\"item_repurchase_rate\":\"0.36\",\"goods_score\":3.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":28,\"shop_info\":{\"login_id\":\"leidukeji\",\"member_id\":\"b2b-22104063401937327c\",\"biz_type\":\"生产加工\",\"company_name\":\"耒都科技(深圳)有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":4,\"factory_inspection\":false,\"shop_repurchase_rate\":\"45.2%\",\"sore_info\":{\"composite_new_score\":\"5.0\",\"composite_score\":0.0,\"consultation_score\":4.0,\"dispute_score\":5.0,\"logistics_score\":4.0,\"return_score\":4.5}}},{\"item_id\":762108681853,\"product_url\":\"https://detail.1688.com/offer/762108681853.html\",\"title\":\"穿越时空ar加特林射击小型玩具游乐设备摆摊神器vr游戏机投资商用\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01olHKmO2IvtjeEUh2N_!!2131609349-0-cib.jpg\",\"category_path\":[\"1045018\",\"1811\",\"18\"],\"price\":\"6499\",\"price_info\":{\"drop_ship_price\":\"6499\",\"wholesale_price\":\"6499\",\"origin_price\":\"6499\"},\"quantity_begin\":2,\"quantity_prices\":[{\"begin_num\":\"2\",\"end_num\":\"4\",\"price\":\"6499.00\"},{\"begin_num\":\"5\",\"end_num\":\"\",\"price\":\"5780.00\"}],\"sale_info\":{\"gmv_30days\":\"4万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":9,\"orders_count\":3},\"type\":\"normal\",\"unit\":\"套\",\"delivery_info\":{\"area_from\":[\"广东\",\"广州市番禺区\"],\"weight\":500.0,\"suttle_weight\":0.0,\"free_postage\":false},\"item_repurchase_rate\":\"0.0\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":24,\"shop_info\":{\"login_id\":\"广州龙程电子\",\"member_id\":\"b2b-2131609349\",\"biz_type\":\"生产加工\",\"company_name\":\"广州市龙程电子有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":10,\"factory_inspection\":true,\"shop_repurchase_rate\":\"22.5%\",\"sore_info\":{\"composite_new_score\":\"5.0\",\"composite_score\":0.0,\"consultation_score\":4.5,\"dispute_score\":5.0,\"logistics_score\":4.0,\"return_score\":4.0}}},{\"item_id\":654015819856,\"product_url\":\"https://detail.1688.com/offer/654015819856.html\",\"title\":\"跨境专供vrgpro蓝光版3d眼镜元宇宙新款手机虚拟现实头盔vr眼镜\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01DSqL2V1xDpTuYmdqp_!!3167206410-0-cib.jpg\",\"category_path\":[\"726\",\"1032228\",\"7\"],\"price\":\"21.50\",\"price_info\":{\"drop_ship_price\":\"29.00\",\"wholesale_price\":\"21.50\",\"origin_price\":\"21.50\"},\"quantity_begin\":2,\"quantity_prices\":[],\"sale_info\":{\"gmv_30days\":\"4万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":17488,\"orders_count\":825},\"type\":\"normal\",\"unit\":\"台\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市光明新区\"],\"weight\":0.6,\"suttle_weight\":0.6,\"free_postage\":false},\"item_repurchase_rate\":\"0.3043\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":30,\"shop_info\":{\"login_id\":\"深圳艺橙科技\",\"member_id\":\"b2b-31672064106c1d4\",\"biz_type\":\"生产加工\",\"company_name\":\"深圳市艺橙科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":7,\"factory_inspection\":false,\"shop_repurchase_rate\":\"36.6%\",\"sore_info\":{\"composite_new_score\":\"4.5\",\"composite_score\":0.0,\"consultation_score\":3.0,\"dispute_score\":4.0,\"logistics_score\":4.0,\"return_score\":3.5}}},{\"item_id\":696999559103,\"product_url\":\"https://detail.1688.com/offer/696999559103.html\",\"title\":\"工厂直供G13千幻魔镜vr眼镜3d数码手机VR眼镜虚拟现实眼镜现货\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01YvZ2622AReXnQkptk_!!3384978200-0-cib.jpg\",\"category_path\":[\"726\",\"1032228\",\"7\"],\"price\":\"20.50\",\"price_info\":{\"drop_ship_price\":\"30.00\",\"wholesale_price\":\"20.50\",\"origin_price\":\"20.50\"},\"quantity_begin\":20,\"quantity_prices\":[{\"begin_num\":\"20\",\"end_num\":\"\",\"price\":\"20.50\"}],\"sale_info\":{\"gmv_30days\":\"4万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":43153,\"orders_count\":109},\"type\":\"normal\",\"unit\":\"副\",\"delivery_info\":{\"area_from\":[\"广东\",\"东莞市\"],\"weight\":0.0,\"suttle_weight\":0.0,\"free_postage\":false},\"item_repurchase_rate\":\"0.5556\",\"goods_score\":0.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":8,\"shop_info\":{\"login_id\":\"步青云科技\",\"member_id\":\"b2b-338497820022936\",\"biz_type\":\"生产加工\",\"company_name\":\"深圳市风云令科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":7,\"factory_inspection\":false,\"shop_repurchase_rate\":\"41.3%\",\"sore_info\":{\"composite_new_score\":\"3.5\",\"composite_score\":0.0,\"consultation_score\":2.0,\"dispute_score\":5.0,\"logistics_score\":2.0,\"return_score\":3.5}}},{\"item_id\":743259466093,\"product_url\":\"https://detail.1688.com/offer/743259466093.html\",\"title\":\"适用于Oculus Quest 3可调节头戴VR配件舒适可替换精英头戴\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01sIDyGM1QO1B7Ub808_!!3957321965-0-cib.jpg\",\"category_path\":[\"123760004\",\"123754001\",\"7\"],\"price\":\"75.00\",\"price_info\":{\"drop_ship_price\":\"75.00\",\"wholesale_price\":\"75.00\",\"origin_price\":\"75.00\"},\"quantity_begin\":2,\"quantity_prices\":[{\"begin_num\":\"2\",\"end_num\":\"99\",\"price\":\"75.00\"},{\"begin_num\":\"100\",\"end_num\":\"999\",\"price\":\"65.00\"},{\"begin_num\":\"1000\",\"end_num\":\"\",\"price\":\"50.00\"}],\"sale_info\":{\"gmv_30days\":\"4万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":4600,\"orders_count\":46},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"浙江\",\"温州市\"],\"weight\":12.0,\"suttle_weight\":0.0,\"free_postage\":false},\"item_repurchase_rate\":\"0.4\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":19,\"shop_info\":{\"login_id\":\"荣祥vr配件厂家直销店\",\"member_id\":\"b2b-39573219655a1ac\",\"biz_type\":\"生产加工\",\"company_name\":\"苍南县俊森硅胶制品厂\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":6,\"factory_inspection\":false,\"shop_repurchase_rate\":\"49%\",\"sore_info\":{\"composite_new_score\":\"3.5\",\"composite_score\":0.0,\"consultation_score\":2.0,\"dispute_score\":5.0,\"logistics_score\":2.0,\"return_score\":3.5}}},{\"item_id\":722893906922,\"product_url\":\"https://detail.1688.com/offer/722893906922.html\",\"title\":\"VR民建路桥市政施工安全体验馆行走平台9D蛋椅太空舱科普馆设备\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01rMb9lF1dckrcrWUS4_!!2215895683757-0-cib.jpg\",\"category_path\":[\"1033550\",\"1811\",\"18\"],\"price\":\"800.0\",\"price_info\":{\"drop_ship_price\":\"800.0\",\"wholesale_price\":\"800.0\",\"origin_price\":\"800.0\"},\"quantity_begin\":1,\"quantity_prices\":[{\"begin_num\":\"1\",\"end_num\":\"\",\"price\":\"800.00\"}],\"sale_info\":{\"gmv_30days\":\"3万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":69,\"orders_count\":3},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"广东\",\"广州市\"],\"weight\":0.0,\"suttle_weight\":0.0,\"free_postage\":false},\"item_repurchase_rate\":\"0.0\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":0,\"shop_info\":{\"login_id\":\"苿莱科普\",\"member_id\":\"b2b-2215895683757ac3e5\",\"biz_type\":\"\",\"company_name\":\"广州沃玛电子设备有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":1,\"factory_inspection\":false,\"shop_repurchase_rate\":\"0%\",\"sore_info\":{\"composite_new_score\":\"4.0\",\"composite_score\":0.0,\"consultation_score\":3.0,\"dispute_score\":4.0,\"logistics_score\":3.0,\"return_score\":5.0}}},{\"item_id\":570860929024,\"product_url\":\"https://detail.1688.com/offer/570860929024.html\",\"title\":\"新款VRPARK眼镜体感头盔跨境BOX体感3d虚拟游戏手机全代发VR眼镜\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01pMIM3n25NSkoLx4mA_!!2850237514-0-cib.jpg\",\"category_path\":[\"726\",\"1032228\",\"7\"],\"price\":\"24.00\",\"price_info\":{\"drop_ship_price\":\"29.00\",\"wholesale_price\":\"24.00\",\"origin_price\":\"24.00\"},\"quantity_begin\":2,\"quantity_prices\":[{\"begin_num\":\"2\",\"end_num\":\"\",\"price\":\"24.00\"}],\"sale_info\":{\"gmv_30days\":\"3万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":25928,\"orders_count\":2357},\"type\":\"normal\",\"unit\":\"台\",\"delivery_info\":{\"area_from\":[\"广东\",\"深圳市龙岗区\"],\"weight\":0.38,\"suttle_weight\":0.6,\"free_postage\":false},\"item_repurchase_rate\":\"0.55\",\"goods_score\":4.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":11,\"shop_info\":{\"login_id\":\"科比翼科技\",\"member_id\":\"b2b-28502375144c884\",\"biz_type\":\"生产加工\",\"company_name\":\"深圳市科比翼科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":8,\"factory_inspection\":true,\"shop_repurchase_rate\":\"38.2%\",\"sore_info\":{\"composite_new_score\":\"5.0\",\"composite_score\":0.0,\"consultation_score\":4.0,\"dispute_score\":4.0,\"logistics_score\":4.0,\"return_score\":3.5}}},{\"item_id\":683633734894,\"product_url\":\"https://detail.1688.com/offer/683633734894.html\",\"title\":\"影动力vr游戏机双人射击vr游乐设备虚拟体感vr体验馆一体机工厂\",\"img\":\"https://cbu01.alicdn.com/img/ibank/O1CN01c6gi6f1QlNG2dq6cU_!!2381872016-0-cib.jpg\",\"category_path\":[\"1045018\",\"1811\",\"18\"],\"price\":\"125.0\",\"price_info\":{\"drop_ship_price\":\"125.0\",\"wholesale_price\":\"125.0\",\"origin_price\":\"125.0\"},\"quantity_begin\":2,\"quantity_prices\":[{\"begin_num\":\"2\",\"end_num\":\"\",\"price\":\"125.00\"}],\"sale_info\":{\"gmv_30days\":\"3万+\",\"gmv_30days_cb\":0.0,\"sale_quantity\":4848,\"orders_count\":526},\"type\":\"normal\",\"unit\":\"个\",\"delivery_info\":{\"area_from\":[\"广东\",\"广州市番禺区\"],\"weight\":0.0,\"suttle_weight\":0.0,\"free_postage\":false},\"item_repurchase_rate\":\"0.2967\",\"goods_score\":5.0,\"image_dsm_score\":0.0,\"primary_rank_score\":0,\"buyer_protections\":null,\"super_new_product\":false,\"byr_inquiry_uv\":17,\"shop_info\":{\"login_id\":\"广州影动力\",\"member_id\":\"b2b-2381872016\",\"biz_type\":\"生产加工\",\"company_name\":\"广州市影擎电子科技有限公司\",\"service_tags\":null,\"tp_member\":true,\"tp_year\":10,\"factory_inspection\":true,\"shop_repurchase_rate\":\"35.8%\",\"sore_info\":{\"composite_new_score\":\"4.0\",\"composite_score\":0.0,\"consultation_score\":4.0,\"dispute_score\":5.0,\"logistics_score\":2.0,\"return_score\":5.0}}}]}}";
        ObjectMapper mapper = new ObjectMapper();
        return mapper.readValue(responseBody, KeywordResponse.class);
    }

    public DetailResponse getDetailItemResponse(
            long id
    ) throws IOException, InterruptedException {
        /*
        HttpRequest request = HttpRequest.newBuilder()
                .uri(URI.create("http://api.tmapi.top/1688/item_desc?apiToken=" + tmapiToken + "&item_id=" + id))
                .method("GET", HttpRequest.BodyPublishers.noBody())
                .build();
        HttpResponse<String> response = HttpClient.newHttpClient().send(request, HttpResponse.BodyHandlers.ofString());
        String responseBody = response.body();
        tmapiDao.insertIntoSearchDetailHistory(id, responseBody);
         */
//        String responseBody = "{\"code\":200,\"msg\":\"success\",\"data\":{\"item_id\":655681270116,\"title\":\"仿真南瓜超大蔬菜模型装饰假南瓜批发万圣节丰收节摆件厂家直销\",\"category_id\":201161302,\"root_category_id\":\"67\",\"currency\":\"CNY\",\"offer_unit\":\"个\",\"product_props\":[{\"材质\":\"软质pvc\"},{\"包装\":\"普通包装\"},{\"颜色\":\"尖头南瓜青色,尖头南瓜橘色,11厘米黑色南瓜,直径14厘米直柄南瓜,直径17厘米南瓜绿色,直径17厘米南瓜橘色,直径17厘米南瓜红色,直径16厘米高南瓜,直径19厘米高南瓜,直径16厘米开口南瓜青色,直径16厘米开口南瓜橘色,直径24厘米开口南瓜橘色,直径24厘米开口南瓜青色,直接15厘米弯头南瓜,230鬼面南瓜,直径20厘米高南瓜,直径30厘米高南瓜,145鬼面南瓜\"},{\"用途\":\"拍摄道具\"},{\"人群\":\"大南瓜模型\"},{\"场景\":\"现货批发\"}],\"main_imgs\":[\"https://cbu01.alicdn.com/img/ibank/O1CN01HuWqU12HMnfEc5JfT_!!3247279137-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN01QvETML2HMnfSoKEvD_!!3247279137-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN01YH8Ahk2HMnfJYzVYf_!!3247279137-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN010ZdGfO2HMnYk1q3m4_!!3247279137-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN019sod7M2HMnYklnqfK_!!3247279137-0-cib.jpg\"],\"video_url\":\"https://cloud.video.taobao.com/play/u/3247279137/p/2/e/6/t/1/327805863554.mp4\",\"detail_url\":\"https://itemcdn.tmall.com/1688offer/icoss3488749080763e2593f32f859e\",\"sale_count\":\"258\",\"shop_info\":{\"shop_name\":\"春夏秋冬工艺品超级工厂\",\"shop_url\":\"https://winport.m.1688.com/page/index.html?memberId=b2b-32472791372fd88\",\"seller_login_id\":\"\",\"seller_user_id\":\"3247279137\",\"seller_member_id\":\"b2b-32472791372fd88\"},\"delivery_info\":{\"unit_weight\":2.0},\"sku_price_scale\":\"￥12.0-￥12.0\",\"sku_price_scale_original\":\"￥12.0-￥12.0\",\"sku_price_range\":{\"begin_num\":\"1\",\"stock\":89607,\"sell_unit\":\"个\",\"sku_param\":[{\"beginAmount\":\"1\",\"price\":12.0}],\"mix_param\":{\"mixAmount\":\"10\",\"mixBegin\":\"0\",\"mixNum\":\"1\",\"shopMixNum\":\"2147483647\",\"supportMix\":\"true\"}},\"sku_props\":[{\"prop_name\":\"颜色\",\"pid\":\"14617\",\"propValues\":[{\"name\":\"尖头南瓜青色\",\"vid\":\"10942\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01yaZhKZ2HMnYgJKkNN_!!3247279137-0-cib.jpg\"},{\"name\":\"尖头南瓜橘色\",\"vid\":\"55410\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN017UjMY02HMnYiSwSmu_!!3247279137-0-cib.jpg\"},{\"name\":\"11厘米黑色南瓜\",\"vid\":\"74793\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01BbPvaT2HMnYk2KCXd_!!3247279137-0-cib.jpg\"},{\"name\":\"直径14厘米直柄南瓜\",\"vid\":\"12144\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01DlP6zH2HMnYiwWqVY_!!3247279137-0-cib.jpg\"},{\"name\":\"直径17厘米南瓜绿色\",\"vid\":\"19004\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01KcQYyO2HMnYiSyXlL_!!3247279137-0-cib.jpg\"},{\"name\":\"直径17厘米南瓜橘色\",\"vid\":\"19846\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01q8wo052HMnYf6qUkz_!!3247279137-0-cib.jpg\"},{\"name\":\"直径17厘米南瓜红色\",\"vid\":\"15854\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01qIOtYv2HMnYkmHWSO_!!3247279137-0-cib.jpg\"},{\"name\":\"直径16厘米高南瓜\",\"vid\":\"12126\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01D6fqHf2HMnYVcRS8f_!!3247279137-0-cib.jpg\"},{\"name\":\"直径19厘米高南瓜\",\"vid\":\"83324\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01UOJNvS2HMnYiSykJn_!!3247279137-0-cib.jpg\"},{\"name\":\"直径16厘米开口南瓜青色\",\"vid\":\"20126\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01VxZOZu2HMnYgJQv8j_!!3247279137-0-cib.jpg\"},{\"name\":\"直径16厘米开口南瓜橘色\",\"vid\":\"14025\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01Mpo6s02HMnYeZCh4n_!!3247279137-0-cib.jpg\"},{\"name\":\"直径24厘米开口南瓜橘色\",\"vid\":\"46106\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01ns69TI2HMnYiwZSrI_!!3247279137-0-cib.jpg\"},{\"name\":\"直径24厘米开口南瓜青色\",\"vid\":\"13824\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01dkp33g2HMnYg0E5XK_!!3247279137-0-cib.jpg\"},{\"name\":\"直接15厘米弯头南瓜\",\"vid\":\"84492\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01hV4j6r2HMnYgJORKs_!!3247279137-0-cib.jpg\"},{\"name\":\"230鬼面南瓜\",\"vid\":\"21284\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN011WFL522HMnYXKmaJr_!!3247279137-0-cib.jpg\"},{\"name\":\"直径20厘米高南瓜\",\"vid\":\"15923\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01KSg2RK2HMnYgGdMcf_!!3247279137-0-cib.jpg\"},{\"name\":\"直径30厘米高南瓜\",\"vid\":\"51776\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01176KnT2HMnYmQ2kc2_!!3247279137-0-cib.jpg\"},{\"name\":\"145鬼面南瓜\",\"vid\":\"83280\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01tXrGoU2HMnYjAcetJ_!!3247279137-0-cib.jpg\"}]}],\"skus\":[{\"skuid\":\"4901505198756\",\"specid\":\"23674728f2ed393dadd175d7342ba860\",\"sale_price\":\"25.0\",\"origin_price\":\"25.0\",\"stock\":4891,\"sale_count\":0,\"props_ids\":\"14617:10942\",\"props_names\":\"颜色:尖头南瓜青色\"},{\"skuid\":\"4901505198757\",\"specid\":\"63de494ef7a1db1e508a5dcdbc36ad6e\",\"sale_price\":\"25.0\",\"origin_price\":\"25.0\",\"stock\":4992,\"sale_count\":0,\"props_ids\":\"14617:55410\",\"props_names\":\"颜色:尖头南瓜橘色\"},{\"skuid\":\"4901505198758\",\"specid\":\"742c8c695e576358d1ba5def4353de37\",\"sale_price\":\"12.0\",\"origin_price\":\"12.0\",\"stock\":4978,\"sale_count\":0,\"props_ids\":\"14617:74793\",\"props_names\":\"颜色:11厘米黑色南瓜\"},{\"skuid\":\"4901505198760\",\"specid\":\"12d6309ad0b9edd1a64336891386d420\",\"sale_price\":\"19.0\",\"origin_price\":\"19.0\",\"stock\":4944,\"sale_count\":0,\"props_ids\":\"14617:12144\",\"props_names\":\"颜色:直径14厘米直柄南瓜\"},{\"skuid\":\"4901505198761\",\"specid\":\"8ff748f0073484cd4dc9a99d30d766f4\",\"sale_price\":\"28.0\",\"origin_price\":\"28.0\",\"stock\":4992,\"sale_count\":0,\"props_ids\":\"14617:19004\",\"props_names\":\"颜色:直径17厘米南瓜绿色\"},{\"skuid\":\"4901505198762\",\"specid\":\"f640625a7a48a3969718a762b67da9c8\",\"sale_price\":\"28.0\",\"origin_price\":\"28.0\",\"stock\":4969,\"sale_count\":0,\"props_ids\":\"14617:19846\",\"props_names\":\"颜色:直径17厘米南瓜橘色\"},{\"skuid\":\"4901505198763\",\"specid\":\"65ea1e234ed250c5258d0eb24a00f167\",\"sale_price\":\"28.0\",\"origin_price\":\"28.0\",\"stock\":4992,\"sale_count\":0,\"props_ids\":\"14617:15854\",\"props_names\":\"颜色:直径17厘米南瓜红色\"},{\"skuid\":\"4901505198764\",\"specid\":\"a1d6848876816d6ad6ef7e30c3badb57\",\"sale_price\":\"24.0\",\"origin_price\":\"24.0\",\"stock\":4932,\"sale_count\":0,\"props_ids\":\"14617:12126\",\"props_names\":\"颜色:直径16厘米高南瓜\"},{\"skuid\":\"4901505198765\",\"specid\":\"49589d1a361ccdd297c1c126d6722087\",\"sale_price\":\"55.0\",\"origin_price\":\"55.0\",\"stock\":4991,\"sale_count\":0,\"props_ids\":\"14617:83324\",\"props_names\":\"颜色:直径19厘米高南瓜\"},{\"skuid\":\"4901505198766\",\"specid\":\"8862e2752c2b2e168bd9416c18920400\",\"sale_price\":\"25.0\",\"origin_price\":\"25.0\",\"stock\":4997,\"sale_count\":0,\"props_ids\":\"14617:20126\",\"props_names\":\"颜色:直径16厘米开口南瓜青色\"},{\"skuid\":\"4901505198767\",\"specid\":\"c2b5f1da9df02b5683e7455209a9f2c0\",\"sale_price\":\"25.0\",\"origin_price\":\"25.0\",\"stock\":4996,\"sale_count\":0,\"props_ids\":\"14617:14025\",\"props_names\":\"颜色:直径16厘米开口南瓜橘色\"},{\"skuid\":\"4901505198768\",\"specid\":\"e3dee15620bdc991711c7801ff5aedf1\",\"sale_price\":\"42.0\",\"origin_price\":\"42.0\",\"stock\":4996,\"sale_count\":0,\"props_ids\":\"14617:46106\",\"props_names\":\"颜色:直径24厘米开口南瓜橘色\"},{\"skuid\":\"4901505198769\",\"specid\":\"9610e1f28d7f91f3355f77c2f254aed1\",\"sale_price\":\"42.0\",\"origin_price\":\"42.0\",\"stock\":4997,\"sale_count\":0,\"props_ids\":\"14617:13824\",\"props_names\":\"颜色:直径24厘米开口南瓜青色\"},{\"skuid\":\"4901505198770\",\"specid\":\"75cf7e38c560a3ee80d459046a859f57\",\"sale_price\":\"22.0\",\"origin_price\":\"22.0\",\"stock\":4978,\"sale_count\":0,\"props_ids\":\"14617:84492\",\"props_names\":\"颜色:直接15厘米弯头南瓜\"},{\"skuid\":\"4902447162146\",\"specid\":\"12a40b2a89e8c5f0fceefeba1aa8195f\",\"sale_price\":\"78.0\",\"origin_price\":\"78.0\",\"stock\":4997,\"sale_count\":0,\"props_ids\":\"14617:21284\",\"props_names\":\"颜色:230鬼面南瓜\"},{\"skuid\":\"4901505198772\",\"specid\":\"e52d77513c08355f36021e25b4dbaf87\",\"sale_price\":\"58.0\",\"origin_price\":\"58.0\",\"stock\":4979,\"sale_count\":0,\"props_ids\":\"14617:15923\",\"props_names\":\"颜色:直径20厘米高南瓜\"},{\"skuid\":\"4901505198773\",\"specid\":\"0d7cc2f7749981507af04d03eadba85f\",\"sale_price\":\"118.0\",\"origin_price\":\"118.0\",\"stock\":4989,\"sale_count\":0,\"props_ids\":\"14617:51776\",\"props_names\":\"颜色:直径30厘米高南瓜\"},{\"skuid\":\"4902447162147\",\"specid\":\"9b4dd78d8b9e9d6975ef0fab996aa40f\",\"sale_price\":\"39.0\",\"origin_price\":\"39.0\",\"stock\":4997,\"sale_count\":0,\"props_ids\":\"14617:83280\",\"props_names\":\"颜色:145鬼面南瓜\"}]}}";
        // String responseBody = "{\"code\":200,\"msg\":\"success\",\"data\":{\"item_id\":748793770800,\"title\":\"Nillkin适用三星S24 Ultra手机壳镜头滑盖防偷窥保护套S24黑镜Pro\",\"category_id\":1042207,\"root_category_id\":\"7\",\"currency\":\"CNY\",\"offer_unit\":\"个\",\"product_props\":[{\"品牌\":\"NILLKIN 耐尔金\"},{\"款式\":\"全包\"},{\"材质\":\"TPU+PC\"},{\"流行元素\":\"18904525367\"},{\"工艺\":\"喷涂\"},{\"颜色\":\"黑色,蓝色,绿色\"},{\"适用型号\":\"黑镜Pro 三星S24,黑镜Pro 三星S24PLUS,黑镜Pro 三星S24ULTRA\"},{\"主要下游平台\":\"ebay,亚马逊,wish,速卖通,独立站,LAZADA,其他\"},{\"是否跨境出口专供货源\":\"是\"},{\"支持订制\":\"不支持\"},{\"是否专利货源\":\"是\"},{\"风格\":\"商务\"},{\"功能\":\"防震,防摔\"},{\"适用机型\":\"三星\"},{\"颜色分类\":\"黑色\"}],\"main_imgs\":[\"https://cbu01.alicdn.com/img/ibank/O1CN01YWlRZ72CmNnEvdS0s_!!3875408516-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN01ZhqdAu2CmNnKzd0Wk_!!3875408516-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN01VBu7tR2CmNnMgd2a0_!!3875408516-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN01Z8KlIp2CmNnMM7Ay8_!!3875408516-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN01bDbIPK2CmNnILYvIj_!!3875408516-0-cib.jpg\"],\"video_url\":\"https://cloud.video.taobao.com/play/u/3875408516/p/2/e/6/t/1/444630337918.mp4\",\"detail_url\":\"https://itemcdn.tmall.com/1688offer/icoss1726100079f1bee5ea8b28e01e\",\"sale_count\":\"10104\",\"shop_info\":{\"shop_name\":\"深圳市思维创远网络科技有限公司\",\"shop_url\":\"https://winport.m.1688.com/page/index.html?memberId=b2b-38754085164e035\",\"seller_login_id\":\"\",\"seller_user_id\":\"3875408516\",\"seller_member_id\":\"b2b-38754085164e035\"},\"delivery_info\":{\"unit_weight\":0.0},\"sku_price_scale\":\"￥26.0-￥26.0\",\"sku_price_scale_original\":\"￥26.0-￥26.0\",\"sku_price_range\":{\"begin_num\":\"2\",\"stock\":36150,\"sell_unit\":\"个\",\"sku_param\":[{\"beginAmount\":\"2\",\"price\":26.0}],\"mix_param\":{\"mixAmount\":\"300\",\"mixBegin\":\"0\",\"mixNum\":\"2\",\"shopMixNum\":\"2147483647\",\"supportMix\":\"true\"}},\"sku_props\":[{\"prop_name\":\"颜色\",\"pid\":\"78692\",\"propValues\":[{\"name\":\"黑色\",\"vid\":\"16866\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01Not6ag2CmNnFqTBYj_!!3875408516-0-cib.jpg\"},{\"name\":\"蓝色\",\"vid\":\"28422\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01vmOEBq2CmNnFqTO3s_!!3875408516-0-cib.jpg\"},{\"name\":\"绿色\",\"vid\":\"41022\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01uAIqA82CmNnMMAGPE_!!3875408516-0-cib.jpg\"}]},{\"prop_name\":\"适用型号\",\"pid\":\"17294\",\"propValues\":[{\"name\":\"黑镜Pro 三星S24\",\"vid\":\"75810\"},{\"name\":\"黑镜Pro 三星S24PLUS\",\"vid\":\"25336\"},{\"name\":\"黑镜Pro 三星S24ULTRA\",\"vid\":\"14971\"}]}],\"skus\":[{\"skuid\":\"5377485182750\",\"specid\":\"3a20a626c8751dd6a65ae9daad3a03fb\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":1638,\"sale_count\":0,\"props_ids\":\"78692:16866;17294:75810\",\"props_names\":\"颜色:黑色;适用型号:黑镜Pro 三星S24\"},{\"skuid\":\"5377485182748\",\"specid\":\"657645b4ac8d19babdeeff75a15f34a5\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":337,\"sale_count\":0,\"props_ids\":\"78692:16866;17294:25336\",\"props_names\":\"颜色:黑色;适用型号:黑镜Pro 三星S24PLUS\"},{\"skuid\":\"5377485182749\",\"specid\":\"9149c5e0e27fd8b9dea9f961031bb3eb\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":4189,\"sale_count\":0,\"props_ids\":\"78692:16866;17294:14971\",\"props_names\":\"颜色:黑色;适用型号:黑镜Pro 三星S24ULTRA\"},{\"skuid\":\"5377485182747\",\"specid\":\"4cda175ba9a52f45c3dee86408770a14\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":4998,\"sale_count\":0,\"props_ids\":\"78692:28422;17294:75810\",\"props_names\":\"颜色:蓝色;适用型号:黑镜Pro 三星S24\"},{\"skuid\":\"5377485182745\",\"specid\":\"8a7a386aebd5b8bd4b8dd9e065739533\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":4998,\"sale_count\":0,\"props_ids\":\"78692:28422;17294:25336\",\"props_names\":\"颜色:蓝色;适用型号:黑镜Pro 三星S24PLUS\"},{\"skuid\":\"5377485182746\",\"specid\":\"d15e2063fabfd2ef2a7ef0edbcc4d607\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":4990,\"sale_count\":0,\"props_ids\":\"78692:28422;17294:14971\",\"props_names\":\"颜色:蓝色;适用型号:黑镜Pro 三星S24ULTRA\"},{\"skuid\":\"5377485182744\",\"specid\":\"c779a59e99bf0550d71c6643d67503ad\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":5000,\"sale_count\":0,\"props_ids\":\"78692:41022;17294:75810\",\"props_names\":\"颜色:绿色;适用型号:黑镜Pro 三星S24\"},{\"skuid\":\"5377485182742\",\"specid\":\"8f86c1eefd4149cf21fa4f0b3bba1125\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":5000,\"sale_count\":0,\"props_ids\":\"78692:41022;17294:25336\",\"props_names\":\"颜色:绿色;适用型号:黑镜Pro 三星S24PLUS\"},{\"skuid\":\"5377485182743\",\"specid\":\"7ef6738db5addd0da00da88bdf6f3e0e\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":5000,\"sale_count\":0,\"props_ids\":\"78692:41022;17294:14971\",\"props_names\":\"颜色:绿色;适用型号:黑镜Pro 三星S24ULTRA\"}]}}";
        /*
        String responseBody = "{\"code\":200,\"msg\":\"success\",\"data\":{\"item_id\":10000000000,\"title\":\"Nillkin适用三星S24 Ultra手机壳镜头滑盖防偷窥保护套S24黑镜Pro\",\"category_id\":1042207,\"root_category_id\":\"7\",\"currency\":\"CNY\",\"offer_unit\":\"个\",\"product_props\":[{\"品牌\":\"NILLKIN 耐尔金\"},{\"款式\":\"全包\"},{\"材质\":\"TPU+PC\"},{\"流行元素\":\"18904525367\"},{\"工艺\":\"喷涂\"},{\"颜色\":\"黑色,蓝色,绿色\"},{\"适用型号\":\"黑镜Pro 三星S24,黑镜Pro 三星S24PLUS,黑镜Pro 三星S24ULTRA\"},{\"主要下游平台\":\"ebay,亚马逊,wish,速卖通,独立站,LAZADA,其他\"},{\"是否跨境出口专供货源\":\"是\"},{\"支持订制\":\"不支持\"},{\"是否专利货源\":\"是\"},{\"风格\":\"商务\"},{\"功能\":\"防震,防摔\"},{\"适用机型\":\"三星\"},{\"颜色分类\":\"黑色\"}],\"main_imgs\":[\"https://cbu01.alicdn.com/img/ibank/O1CN01YWlRZ72CmNnEvdS0s_!!3875408516-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN01ZhqdAu2CmNnKzd0Wk_!!3875408516-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN01VBu7tR2CmNnMgd2a0_!!3875408516-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN01Z8KlIp2CmNnMM7Ay8_!!3875408516-0-cib.jpg\",\"https://cbu01.alicdn.com/img/ibank/O1CN01bDbIPK2CmNnILYvIj_!!3875408516-0-cib.jpg\"],\"video_url\":\"https://cloud.video.taobao.com/play/u/3875408516/p/2/e/6/t/1/444630337918.mp4\",\"detail_url\":\"https://itemcdn.tmall.com/1688offer/icoss1726100079f1bee5ea8b28e01e\",\"sale_count\":\"10104\",\"shop_info\":{\"shop_name\":\"深圳市思维创远网络科技有限公司\",\"shop_url\":\"https://winport.m.1688.com/page/index.html?memberId=b2b-38754085164e035\",\"seller_login_id\":\"\",\"seller_user_id\":\"3875408516\",\"seller_member_id\":\"b2b-38754085164e035\"},\"delivery_info\":{\"unit_weight\":0.0},\"sku_price_scale\":\"￥26.0-￥26.0\",\"sku_price_scale_original\":\"￥26.0-￥26.0\",\"sku_price_range\":{\"begin_num\":\"2\",\"stock\":36150,\"sell_unit\":\"个\",\"sku_param\":[{\"beginAmount\":\"2\",\"price\":26.0}],\"mix_param\":{\"mixAmount\":\"300\",\"mixBegin\":\"0\",\"mixNum\":\"2\",\"shopMixNum\":\"2147483647\",\"supportMix\":\"true\"}},\"sku_props\":[{\"prop_name\":\"颜色\",\"pid\":\"78692\",\"propValues\":[{\"name\":\"黑色\",\"vid\":\"16866\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01Not6ag2CmNnFqTBYj_!!3875408516-0-cib.jpg\"},{\"name\":\"蓝色\",\"vid\":\"28422\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01vmOEBq2CmNnFqTO3s_!!3875408516-0-cib.jpg\"},{\"name\":\"绿色\",\"vid\":\"41022\",\"imageUrl\":\"https://cbu01.alicdn.com/img/ibank/O1CN01uAIqA82CmNnMMAGPE_!!3875408516-0-cib.jpg\"}]},{\"prop_name\":\"适用型号\",\"pid\":\"17294\",\"propValues\":[{\"name\":\"黑镜Pro 三星S24\",\"vid\":\"75810\"},{\"name\":\"黑镜Pro 三星S24PLUS\",\"vid\":\"25336\"},{\"name\":\"黑镜Pro 三星S24ULTRA\",\"vid\":\"14971\"}]}],\"skus\":[{\"skuid\":\"5377485182750\",\"specid\":\"3a20a626c8751dd6a65ae9daad3a03fb\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":1638,\"sale_count\":0,\"props_ids\":\"78692:16866;17294:75810\",\"props_names\":\"颜色:黑色;适用型号:黑镜Pro 三星S24\"},{\"skuid\":\"5377485182748\",\"specid\":\"657645b4ac8d19babdeeff75a15f34a5\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":337,\"sale_count\":0,\"props_ids\":\"78692:16866;17294:25336\",\"props_names\":\"颜色:黑色;适用型号:黑镜Pro 三星S24PLUS\"},{\"skuid\":\"5377485182749\",\"specid\":\"9149c5e0e27fd8b9dea9f961031bb3eb\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":4189,\"sale_count\":0,\"props_ids\":\"78692:16866;17294:14971\",\"props_names\":\"颜色:黑色;适用型号:黑镜Pro 三星S24ULTRA\"},{\"skuid\":\"5377485182747\",\"specid\":\"4cda175ba9a52f45c3dee86408770a14\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":4998,\"sale_count\":0,\"props_ids\":\"78692:28422;17294:75810\",\"props_names\":\"颜色:蓝色;适用型号:黑镜Pro 三星S24\"},{\"skuid\":\"5377485182745\",\"specid\":\"8a7a386aebd5b8bd4b8dd9e065739533\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":4998,\"sale_count\":0,\"props_ids\":\"78692:28422;17294:25336\",\"props_names\":\"颜色:蓝色;适用型号:黑镜Pro 三星S24PLUS\"},{\"skuid\":\"5377485182746\",\"specid\":\"d15e2063fabfd2ef2a7ef0edbcc4d607\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":4990,\"sale_count\":0,\"props_ids\":\"78692:28422;17294:14971\",\"props_names\":\"颜色:蓝色;适用型号:黑镜Pro 三星S24ULTRA\"},{\"skuid\":\"5377485182744\",\"specid\":\"c779a59e99bf0550d71c6643d67503ad\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":5000,\"sale_count\":0,\"props_ids\":\"78692:41022;17294:75810\",\"props_names\":\"颜色:绿色;适用型号:黑镜Pro 三星S24\"},{\"skuid\":\"5377485182742\",\"specid\":\"8f86c1eefd4149cf21fa4f0b3bba1125\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":5000,\"sale_count\":0,\"props_ids\":\"78692:41022;17294:25336\",\"props_names\":\"颜色:绿色;适用型号:黑镜Pro 三星S24PLUS\"},{\"skuid\":\"5377485182743\",\"specid\":\"7ef6738db5addd0da00da88bdf6f3e0e\",\"sale_price\":\"26.0\",\"origin_price\":\"26.0\",\"stock\":5000,\"sale_count\":0,\"props_ids\":\"78692:41022;17294:14971\",\"props_names\":\"颜色:绿色;适用型号:黑镜Pro 三星S24ULTRA\"}]}}";
        ObjectMapper mapper = new ObjectMapper();
        return mapper.readValue(responseBody, DetailResponse.class);
         */
        System.out.println(tmapiDao.insertTest());
        return new DetailResponse();
    }

    public List<Long> getKeywordItemIdList() {
        return tmapiDao.getKeywordItemIdStream()
                .distinct()
                .collect(Collectors.toList());
    }


    public List<Long> getDetailItemIdList() {
        return tmapiDao.getDetailItemIdStream()
                .distinct()
                .collect(Collectors.toList());
    }

    public void insertKeywordItemInformation(List<KeywordItem> keywordItemList, String keyword) {
        keywordItemList.forEach(keywordItem -> {
            insertKeywordItem1688(keywordItem, keyword);
            Long itemId = keywordItem.getItem_id();
            insertKeywordItemCategoryPaths1688(itemId, keywordItem.getCategory_path());
            insertKeywordItemDeliveryInfo1688(itemId, keywordItem.getDelivery_info());
            insertKeywordItemPriceInfo1688(itemId, keywordItem.getPrice_info());
            insertKeywordItemQuantityPrices1688(itemId, keywordItem.getQuantity_prices());
            insertKeywordItemSaleInfo1688(itemId, keywordItem.getSale_info());
            KeywordShopInfo shopInfo = keywordItem.getShop_info();
            insertKeywordItemShopInfo1688(itemId, shopInfo);
            KeywordShopScoreInfo shopScoreInfo = shopInfo.getSore_info();
            insertKeywordItemScoreInfo1688(shopInfo.getMember_id(), shopScoreInfo);
        });
    }


    public void insertIntoSearchDetailHistory(Long itemId, String jsonResponse) {
        tmapiDao.insertSearchDetailHistory1688(itemId, jsonResponse);
    }

    public void insertIntoSearchKeywordHistory(String keyword, Integer page, String response) {
        tmapiDao.insertSearchKeywordHistory1688(keyword, page, response);
    }

    public void insertKeywordItem1688(KeywordItem item, String keyword) {
        tmapiDao.insertKeywordItem1688(item, keyword);
    }

    public void insertKeywordItemCategoryPaths1688(Long itemId, List<String> categoryPathList) {
        // todo replace with bulk insert
        categoryPathList.forEach(categoryPath -> tmapiDao.insertKeywordItemCategoryPaths1688(itemId, categoryPath));
    }

    public void insertKeywordItemDeliveryInfo1688(Long itemId, SearchDeliveryInfo deliveryInfo) {
        tmapiDao.insertKeywordItemDeliveryInfo1688(itemId, deliveryInfo);
    }

    public void insertKeywordItemPriceInfo1688(Long itemId, PriceInfo priceInfo) {
        tmapiDao.insertKeywordItemPriceInfo1688(itemId, priceInfo);
    }

    public void insertKeywordItemQuantityPrices1688(Long itemId, List<QuantityPrice> quantityPriceList) {
        // todo replace with bulk insert
        quantityPriceList.forEach(quantityPrice -> tmapiDao.insertKeywordItemQuantityPrice1688(itemId, quantityPrice));
    }

    public void insertKeywordItemSaleInfo1688(Long itemId, SaleInfo saleInfo) {
        tmapiDao.insertKeywordItemSaleInfo1688(itemId, saleInfo);
    }

    public void insertKeywordItemScoreInfo1688(String memberId, KeywordShopScoreInfo shopScoreInfo) {
        tmapiDao.insertKeywordItemScoreInfo1688(memberId, shopScoreInfo);
    }

    public void insertKeywordItemShopInfo1688(Long itemId, KeywordShopInfo shopInfo) {
        tmapiDao.insertKeywordItemShopInfo1688(itemId, shopInfo);
    }

    // -----------------------------------------------------
    public void insertDetailInfo1688(
            DetailData detailData
    ) {
        Long itemId = detailData.getItem_id();
        List<String> mainImageList = detailData.getMain_imgs();
        List<ProductProp> productPropList = detailData.getProduct_props();
        List<SkuProp> skuPropList = detailData.getSku_props();

        tmapiDao.insertDetailItemData1688(detailData);
        mainImageList.forEach(mainImage -> tmapiDao.insertDetailItemMainImage1688(itemId, mainImage));

        for (ProductProp productProp : productPropList) {
            productProp.getProperties().forEach((key, value) -> {
                tmapiDao.insertDetailItemProductProp1688(itemId, key, value);
            });
        }

        for (SkuProp skuProp : skuPropList) {
            List<PropValue> propValueList = skuProp.getPropValues();
            Integer insertedSkuPropIdx = tmapiDao.insertDetailItemSkuProp1688(itemId, skuProp);
            propValueList.forEach(propValue -> {
                tmapiDao.insertDetailItemPropValue1688(insertedSkuPropIdx, propValue);
            });
        }

        tmapiDao.insertDetailItemShopInfo1688(itemId, detailData.getShop_info());

        SkuPriceRange skuPriceRange = detailData.getSku_price_range();
        Integer insertedSkuPriceRangeIdx = tmapiDao.insertDetailItemSkuPriceRange1688(itemId, skuPriceRange);
        List<SkuParam> skuParamList = skuPriceRange.getSku_param();
        skuParamList.forEach(skuParam -> tmapiDao.insertDetailItemSkuParam1688(insertedSkuPriceRangeIdx, skuParam));

        List<Sku> skuList = detailData.getSkus();
        skuList.forEach(sku -> tmapiDao.insertDetailItemSku1688(itemId, sku));
    }
}
